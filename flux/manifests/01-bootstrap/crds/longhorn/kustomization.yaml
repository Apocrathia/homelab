---
# yaml-language-server: $schema=https://json.schemastore.org/kustomization.json
apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
metadata:
  name: longhorn-crds

resources:
  - https://raw.githubusercontent.com/longhorn/longhorn/refs/heads/master/deploy/longhorn.yaml

patches:
  # Keep only CRDs by removing everything else
  - patch: |-
      apiVersion: v1
      kind: Service
      metadata:
        name: any-name
      $patch: delete
    target:
      # yamllint disable-line rule:line-length
      kind: (Service|Deployment|DaemonSet|StatefulSet|ConfigMap|Secret|ServiceAccount|Role|RoleBinding|ClusterRole|ClusterRoleBinding|PodSecurityPolicy|StorageClass|PersistentVolumeClaim|Namespace|PriorityClass)
