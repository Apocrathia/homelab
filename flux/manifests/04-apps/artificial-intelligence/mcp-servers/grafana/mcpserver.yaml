---
apiVersion: toolhive.stacklok.dev/v1alpha1
kind: MCPServer
metadata:
  name: grafana-mcp
  namespace: mcp-grafana
  labels:
    app.kubernetes.io/name: grafana-mcp
    app.kubernetes.io/component: mcp-server
    app.kubernetes.io/part-of: artificial-intelligence
    app.kubernetes.io/managed-by: flux
  annotations:
    description: "Grafana MCP server for AI assistant integration"
spec:
  # renovate: datasource=docker registryUrl=https://docker.io depName=grafana/mcp-grafana
  image: docker.io/grafana/mcp-grafana:0.7.9
  transport: sse
  port: 8000
  targetPort: 8000
  permissionProfile:
    type: builtin
    name: network
  env:
    - name: GRAFANA_URL
      value: "https://grafana.gateway.services.apocrathia.com"
  args:
    - --base-path
    - /grafana
    - --debug
  resources:
    limits:
      cpu: "200m"
      memory: "256Mi"
    requests:
      cpu: "100m"
      memory: "128Mi"
