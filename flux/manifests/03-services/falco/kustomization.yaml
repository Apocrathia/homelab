---
apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

resources:
  - namespace.yaml
  - helmrelease.yaml

configMapGenerator:
  - name: falco-grafana-dashboard
    namespace: prometheus-system
    options:
      labels:
        app: kube-prometheus-stack-grafana
        grafana_dashboard: "1"
      annotations:
        grafana_folder: "Security"
    files:
      - falco-dashboard.json=https://grafana.com/api/dashboards/17319/revisions/1/download
  - name: authentik-blueprint-falco-security-dashboard
    namespace: falco-system
    files:
      - falco-security-dashboard.yaml=authentik-blueprint.yaml

generatorOptions:
  disableNameSuffixHash: true

labels:
  - includeSelectors: true
    pairs:
      authentik_blueprint: "true"
