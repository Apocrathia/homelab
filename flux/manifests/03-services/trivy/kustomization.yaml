---
apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
metadata:
  name: trivy-operator

resources:
  - namespace.yaml
  - helmrelease.yaml

configMapGenerator:
  - name: trivy-operator-grafana-dashboard
    namespace: prometheus-system
    options:
      labels:
        app: kube-prometheus-stack-grafana
        grafana_dashboard: "1"
      annotations:
        grafana_folder: "Security"
    files:
      - trivy-operator-dashboard.json=https://grafana.com/api/dashboards/17813/revisions/2/download

generatorOptions:
  disableNameSuffixHash: true
