---
apiVersion: grafana.integreatly.org/v1beta1
kind: GrafanaContactPoint
metadata:
  name: discord
  namespace: prometheus-system
spec:
  name: Discord
  type: "discord"
  instanceSelector:
    matchLabels:
      app.kubernetes.io/name: grafana
      app.kubernetes.io/instance: kube-prometheus-stack
  settings:
    title: "Grafana Alert"
    message: "{{ range .Alerts }}{{ .Annotations.summary }}{{ end }}"
  valuesFrom:
    - targetPath: url
      valueFrom:
        secretKeyRef:
          name: grafana-secrets
          key: discord-webhook-url
