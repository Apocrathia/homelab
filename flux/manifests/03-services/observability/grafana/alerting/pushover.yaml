---
apiVersion: grafana.integreatly.org/v1beta1
kind: GrafanaContactPoint
metadata:
  name: pushover
  namespace: prometheus-system
spec:
  name: Pushover
  type: "pushover"
  instanceSelector:
    matchLabels:
      app.kubernetes.io/name: grafana
      app.kubernetes.io/instance: kube-prometheus-stack
  settings:
    title: "Grafana Alert"
    message: "{{ range .Alerts }}{{ .Annotations.summary }}{{ end }}"
  valuesFrom:
    - targetPath: userKey
      valueFrom:
        secretKeyRef:
          name: grafana-secrets
          key: pushover-user-key
    - targetPath: apiToken
      valueFrom:
        secretKeyRef:
          name: grafana-secrets
          key: pushover-app-key
