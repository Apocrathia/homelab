---
apiVersion: grafana.integreatly.org/v1beta1
kind: GrafanaContactPoint
metadata:
  name: slack
  namespace: prometheus-system
spec:
  name: Slack
  type: "slack"
  instanceSelector:
    matchLabels:
      app.kubernetes.io/name: grafana
      app.kubernetes.io/instance: kube-prometheus-stack
  settings:
    title: "Grafana Alert"
    text: "{{ range .Alerts }}{{ .Annotations.summary }}{{ end }}"
  valuesFrom:
    - targetPath: url
      valueFrom:
        secretKeyRef:
          name: grafana-secrets
          key: slack-webhook-url
